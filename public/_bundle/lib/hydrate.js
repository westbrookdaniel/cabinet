import{a as h,e as l}from"../chunk-CY6SPCA3.js";import"../chunk-HEUTMP7X.js";var p="popstate",v="beforeunload",b=r=>(r.preventDefault(),r.returnValue=""),y=()=>{removeEventListener(v,b,{capture:!0})};function E(r){let t=r.getLocation(),i=()=>{},e=new Set,n=[],o=[],s=()=>{if(n.length){n[0]?.(s,()=>{n=[],y()});return}for(;o.length;)o.shift()?.();g()},c=a=>{o.push(a),s()},g=()=>{t=r.getLocation(),e.forEach(a=>a())};return{get hash(){return t.hash},get href(){return t.href},get pathname(){return t.pathname},get search(){return t.search},get state(){return t.state},listen:a=>(e.size===0&&(i=r.listener(g)),e.add(a),()=>{e.delete(a),e.size===0&&i()}),push:(a,u)=>{c(()=>{r.pushState(a,u)})},replace:(a,u)=>{c(()=>{r.replaceState(a,u)})},go:a=>{c(()=>{r.go(a)})},back:()=>{c(()=>{r.back()})},forward:()=>{c(()=>{r.forward()})},createHref:a=>r.createHref(a),block:a=>(n.push(a),n.length===1&&addEventListener(v,b,{capture:!0}),()=>{n=n.filter(u=>u!==a),n.length||y()})}}function w(){let r=()=>`${window.location.pathname}${window.location.hash}${window.location.search}`,t=e=>e;return E({getLocation:()=>k(r(),history.state),listener:e=>(addEventListener(p,e),()=>{removeEventListener(p,e)}),pushState:(e,n)=>{window.history.pushState({...n,key:m()},"",t(e))},replaceState:(e,n)=>{window.history.replaceState({...n,key:m()},"",t(e))},back:()=>window.history.back(),forward:()=>window.history.forward(),go:e=>window.history.go(e),createHref:e=>t(e)})}function k(r,t){let i=r.indexOf("#"),e=r.indexOf("?");return{href:r,pathname:r.substring(0,i>0?e>0?Math.min(i,e):i:e>0?e:r.length),hash:i>-1?r.substring(i,e):"",search:e>-1?r.substring(e):"",state:t}}function m(){return Math.random().toString(36)}function L(r){let t=w();return t.listen(async()=>{let e=t.pathname,o=(await import(`/_bundle/pages${e==="/"?"/index":e}.js`)).default;h(r,{type:o,attributes:{}}),o.meta&&l.from(o.meta)}),document.querySelectorAll("a").forEach(e=>d(t,e)),new MutationObserver(e=>{e.forEach(n=>{switch(n.type){case"childList":n.addedNodes.forEach(o=>{o instanceof HTMLElement&&(o instanceof HTMLAnchorElement&&d(t,o),o.querySelectorAll("a").forEach(s=>d(t,s)))});break;case"attributes":{let o=n.target;o instanceof HTMLElement&&(o instanceof HTMLAnchorElement&&d(t,o),o.querySelectorAll("a").forEach(s=>d(t,s)))}}})}).observe(document,{childList:!0,subtree:!0,attributes:!0}),t}var f=new WeakMap,d=(r,t)=>{if(f.has(t)){let[i,e]=f.get(t);t.removeEventListener(i,e),f.delete(t)}t.addEventListener("click",i=>{i.preventDefault();let e=t.getAttribute("href");!t.target&&e?.startsWith("/")&&r.push(e)})};function H(r){let t=document.getElementById("_root");if(!t)throw new Error("Root element not found");window.router=L(t),h(t,{type:r,attributes:{}}),r.meta&&l.from(r.meta)}export{H as default};
//# sourceMappingURL=hydrate.js.map
